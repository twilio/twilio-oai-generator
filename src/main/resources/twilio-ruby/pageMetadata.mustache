                class {{apiName}}PageMetadata < PageMetadata
                    attr_reader :{{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}}_page

                    def initialize(version, response, solution, limit)
                        super(version, response)
                        @{{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}}_page = []
                        @limit = limit
                        key = get_key(response.body)
                        records = 0
                        while( limit != :unset && records < limit )
                            @{{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}}_page << {{apiName}}ListResponse.new(version, @payload, key, limit - records)
                            @payload = self.next_page
                            break unless @payload
                            records += @payload.body[key].size
                        end
                        # Path Solution
                        @solution = solution
                    end

                    def each
                        @{{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}}_page.each do |record|
                          yield record
                        end
                    end

                    def to_s
                      '<Twilio::REST::{{domainName}}::{{apiVersionClass}}PageMetadata>';
                    end
                end
                class {{apiName}}ListResponse < InstanceListResource

                    # @param [Array<{{apiName}}Instance>] instance
                    # @param [Hash{String => Object}] headers
                    # @param [Integer] status_code
                    def initialize(version, payload, key, limit = :unset)
                      data_list = payload.body[key]
                      if limit != :unset
                        data_list = data_list[0, limit]
                      end
                      @{{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}} = data_list.map do |data|
                        {{apiName}}Instance.new(version, data)
                      end
                      @headers = payload.headers
                      @status_code = payload.status_code
                    end

                    def {{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}}
                        @{{#lambda.snakecase}}{{apiName}}{{/lambda.snakecase}}
                    end

                    def headers
                      @headers
                    end

                    def status_code
                      @status_code
                    end
                end
